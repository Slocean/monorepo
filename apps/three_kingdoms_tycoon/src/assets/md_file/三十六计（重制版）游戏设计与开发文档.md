# 《三十六计》重制版 — 游戏设计与开发文档（GDD）

> 类型：回合制 · 大富翁式策略 · 在线多人
>
> 平台：H5（可嵌入 Electron / UniApp）
>
> 技术栈：Vue 3 + TypeScript + Phaser 3 + Node.js（联机）

---

## 一、游戏定位与核心目标

《三十六计》是一款基于经典 NFC 老游戏重制的 **回合制策略棋盘游戏**。

核心目标：
- 通过 **兵力、城市、经济、计谋** 的综合博弈
- 逐步消灭其他玩家，成为唯一存活者

设计原则：
- 忠于原作核心规则
- 数值、规则全部配置化
- 支持长期扩展（地图、胜利条件、计谋）

---

## 二、基础规则

### 2.1 玩家

- 玩家数量：2–5 人（默认 5 人）
- 初始状态：
  - 金钱 / 粮食 / 兵力：配置表定义
  - 无城市、无粮田、无兵营
  - 初始玩家携带：10000金钱，10000兵力，10000粮食

### 2.2 回合制规则

- 严格轮流回合制
- 每回合默认流程：
  1. 回合开始
  2. 使用计谋 / 道具（不限次数）
  3. 摇色子（最多一次，可被跳过）
  4. 可以查询其他玩家的游戏信息
  5. 移动并触发节点事件
  6. 回合结束 → 全图收益结算

- 跳过回合：
  - 通过计谋【以逸待劳】或者其他计谋实现
  - 跳过后不摇色子、不移动




---

## 三、胜利与失败

### 3.1 核心胜利条件（默认）

- 场上仅剩 1 名存活玩家

### 3.2 玩家死亡判定

- 玩家兵力 = 0
- 且在此状态下再次受到兵力攻击

### 3.3 可选胜利条件（房间配置）

- 金钱胜利：金钱 ≥ X
- 城市胜利：占领城市 ≥ X
- 兵力胜利：兵力 ≥ X
- 回合数结算：综合评分

---

## 四、地图系统

### 4.1 地图结构

- 地图类型：
  - 固定中国地图
  - 城市位置参考现实中国行政区

- 所有格子均为 **节点**，包括：
  - 城市
  - 粮田
  - 兵营
  - 商店
  - 阴阳点
  - 普通路径点

### 4.2 路径规则

- 存在：
  - 分叉路口（随机选择）
  - 单向路
  - 死胡同

- 预留扩展：
  - 传送点 / 驿站（未启用）

---

## 五、城市系统（核心资产）

### 5.1 城市属性

- 等级：1–5
- 金钱存储
- 粮食存储
- 兵力
- 防御系数（随等级提升）

### 5.2 城市状态

- 未占领：
  - 等级 1
  - 无资源、无兵力

- 被占领：
  - 成为玩家资产
  - 可被攻击 / 单挑 / 进贡

### 5.3 城市升级

- 消耗：
  - 金钱（配置）
  - 粮食（配置）

- 回合消耗规则：
  - 玩家进入城市触发点后
  - 任意城市操作均消耗当前回合

### 5.4 城市收益

- 结算时机：每回合结束
- 收益受影响因素：
  - 城市等级
  - 随机事件（全图效果）

- 破坏规则：
  - 偷窃类计谋可减少资源
  - 敌军攻击仅影响兵力，不影响收益逻辑

---

## 六、战斗系统

### 6.1 攻城战

- 战斗模型：
  - 阶梯差距模型（配置化）

- 影响因子：
  - 攻方兵力
  - 守方兵力
  - 城市等级防御系数

- 设计原则：
  - 兵力差距越大，双方消耗越大
  - 城市等级越高，守方损失越小

> ⚠ 具体公式全部通过数值表控制

### 6.2 单挑系统

- 触发条件：
  - 进入其他玩家占领的城市
  - 需要对方接受
  
- 胜负规则：
  - 依据武器等级差

- 反杀概率（配置项）：
  | 等级差 | 反杀概率 |
  |------|----------|
  | 1    | 0.25     |
  | 2    | 0.18     |
  | 3    | 0.05     |
  | ≥4   | 0        |

- 失败惩罚：
  - 接受者失败失去城市控制权
  - 发起者失败会损失自身资源：金钱，粮食，兵力

---

## 七、粮田系统

### 7.1 粮田属性

- 等级：1–5
- 产量系数
- 防御系数

### 7.2 粮食生产

- 每回合结算
- 自动进入所属城市库存

### 7.3 破坏与修复

- 破坏：
  - 消耗攻击方兵力
  - 降低粮田等级

- 半毁灭状态：
  - 等级 1 被破坏
  - 自动修复 2 回合

- 主动修复：
  - 消耗金钱 + 粮食
  - 1 回合完成

---

## 八、兵营系统

### 8.1 兵营状态

- 未占领：无效果
- 被占领：可操作

### 8.2 功能

- 征兵：
  - 默认比例：1000 金钱 → 500 兵力（配置）

- 解散：
  - 兵力 → 金钱

- 埋伏：
  - 触发时直接消耗双方兵力

---

## 九、商店与计谋系统

### 9.1 商店类型

- 武器商店：
  - 武器（影响单挑）
  - 虎符（兵力翻倍）
  - 田玉（金钱翻倍）

- 计谋商店：
  - 三十六计（可配置，可添加效果，预留扩展）

### 9.2 计谋规则

- 非唯一，可叠加
- 使用限制：
  - 仅自己回合
  - 单回合可多次使用

- 生效规则：
  - 单次生效
  - 目标可为：玩家 / 城市 / 全图

- 干预系统：
  - 【无懈可击】可抵消计谋或随机事件
  - 或者其他计谋

---

## 十、随机事件（阴阳点）

- 触发完全随机
- 无必死事件

- 可能效果：
  - 兵力 / 金钱 / 粮食 增减
  - 道具获取或丢失
  - 全图增益 / 减益
  - 缩小效果只对触发玩家有效

---

## 十一、数值系统

- 所有数值全部配置化：
  - JSON / 表格驱动
  - 支持热更新

包括但不限于：
- 战斗公式
- 升级消耗
- 产出倍率
- 随机概率

---

## 十二、技术架构

### 12.1 前端

- Vue 3（UI / 状态管理）
- Phaser 3（地图 / 动画 / 交互）
- TypeScript

### 12.2 后端

- Node.js
- WebSocket（房间制联机）

### 12.3 同步模型

- 服务端权威：
  - 回合
  - 骰子
  - 战斗结果

---

## 十三、后续扩展方向

- 多张地图
- 自定义地图编辑器
- AI 玩家
- 录像 / 回放
- 传送点 / 船运系统

---

> 本文档为第一版（V1.0），后续可在此基础上持续细化数值表与系统实现。

